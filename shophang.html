<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>huanha.shop.vn</title>
<!-- Favicon chính cho trang web -->
<link rel="icon" type="image/png" sizes="32x32" href="https://i.imgur.com/OutXhHO.jpeg">

<!-- Favicon cho iOS (Apple devices) -->
<link rel="apple-touch-icon" sizes="180x180" href="https://i.imgur.com/OutXhHO.jpeg">

<!-- Favicon dạng SVG cho Safari -->
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">

<!-- Cấu hình hiển thị cho Windows -->
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- (Có thể bỏ link cũ nếu không cần) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha512-Sd6fUCRNIVOTe8DGfE7r2MdOx9op2A1I5q6F9HyVVJ7UkB9Rf7b3+6JzSZ6UTV3a2SdN7erh5+8NEB2v19rYxA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    
    <!-- Link file CSS -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Firebase (v8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    
    <script>
      // Cấu hình Firebase
      var firebaseConfig = {
        apiKey: "AIzaSyDExsK60Qz5T7INkOA-6lnxURB0vPOrpbI",
        authDomain: "havanhuan-login.firebaseapp.com",
        databaseURL: "https://havanhuan-login-default-rtdb.firebaseio.com",
        projectId: "havanhuan-login",
        storageBucket: "havanhuan-login.firebasestorage.app",
        messagingSenderId: "1048157715289",
        appId: "1:1048157715289:web:075769c06baa553eee6a48",
        measurementId: "G-6FLD3F92BE"
      };
      firebase.initializeApp(firebaseConfig);
    </script>
<style>
/* RESET cơ bản */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Nền, font & hiệu ứng toàn trang */
body {
  font-family: Arial, sans-serif;
  color: #fff;
  background: #000;
  position: relative;
  overflow-x: hidden;
}

/* Hiệu ứng nền động: gradient chuyển động */
.background-animation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(-45deg, #000, #222, #444, #111);
  background-size: 400% 400%;
  z-index: -1;
  animation: gradientBG 10s ease infinite;
}
@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* HEADER */
header {
  background-color: rgba(0, 0, 0, 0.8);
  padding: 10px 20px;
}
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.logo {
  display: flex;
  align-items: center;
}
.logo i {
  color: #ff66a8;
  margin-right: 8px;
}
.logo h1 {
  font-size: 1.5rem;
  color: #ff66a8;
  text-transform: uppercase;
  letter-spacing: 1px;
  /* Thêm font từ Google Fonts (có thể tùy chỉnh) */
  font-family: 'Lobster', cursive;
}
.nav-links ul {
  list-style: none;
  display: flex;
  align-items: center;
}
.nav-links li {
  margin-left: 20px;
}
.nav-btn {
  background: transparent;
  color: none;
  border: 1px solid none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;
}
.nav-btn:hover {
  background: #ff66a8;
  color: #000;
}
.hidden {
  display: none !important;
}

/* PHẦN AUTH (Đăng ký / Đăng nhập) */
/* Phần nền bên ngoài khung form */
.auth-section {
  padding: 50px 20px;
  background: #000;  /* Bạn có thể thay bằng một gradient cho phần background của section */
}

.auth-container {
  max-width: 400px;
  margin: 0 auto;
  background: linear-gradient(135deg, #a1c4fd, #c2e9fb); /* Gradient nền đẹp */
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

/* Nền của form đăng ký (nếu bạn muốn thay đổi riêng) */
/* Nếu muốn form trong suốt, bạn có thể giữ lại như cũ hoặc giảm opacity */
.auth-form {
  background: rgba(255, 255, 255, 0.1); /* Hoặc để trong suốt: transparent */
  border: 2px solid #ff66a8;
  border-radius: 8px;
  padding: 20px;
  text-align: center;
  margin-bottom: 20px;
}

/* Các phần khác vẫn giữ nguyên style */
.input-group label {
  color: #ff66a8;
}
.auth-form h2 {
  margin-bottom: 20px;
  color: #ff66a8;
}
.input-group {
  text-align: left;
  margin-bottom: 15px;
}
.input-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #ff66a8;
}
.input-group input {
  width: 100%;
  padding: 8px;
  border: 1px solid #999;
  border-radius: 4px;
}
.auth-btn {
  background: #ff66a8;
  color: #000;
  border: none;
  padding: 10px;
  width: 100%;
  border-radius: 4px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}
.auth-btn:hover {
  background: #ff99c9;
}
.switch-text {
  margin-top: 10px;
  color: #ccc;
}
.switch-link {
  color: #ff66a8;
  cursor: pointer;
  text-decoration: underline;
}
.auth-message {
  color: #ff6666;
  font-weight: bold;
  margin-top: 10px;
}

/* PHẦN SHOP */
.shop-section {
  min-height: 60vh;
  padding: 40px 20px;
  text-align: center;
  background-color: rgba(0, 0, 0, 0.6);
}
.shop-section h2,
.shop-section h3 {
  color: #ff66a8;
  margin-bottom: 10px;
}
.shop-section p {
  margin-bottom: 30px;
  color: #fff;
  font-size: 1rem;
}

/* Marquee hiệu ứng chữ chạy */
.marquee-container {
  font-size: 15px;
  font-weight: bold;
  color: #ffcc00;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  margin-bottom: 20px;
}
.marquee-container span {
  display: inline-block;
}

/* Thanh ngang màu vàng */
.yellow-bar {
  width: 380px;
  height: 2px;
  background-color: yellow;
  margin: 10px 0 20px;
}

/* Danh mục sản phẩm */
.product-section {
  margin-bottom: 30px;
}
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  max-width: 1000px;
  margin: 0 auto;
}
.product-card {
  background: #fff;
  border: 1px solid #fff;
  border-radius: 2px;
  overflow: hidden;
  padding: 1px;
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(255, 102, 168, 0.3);
}
.product-card img {
  width: 100%;
  border-radius: 1px;
  margin-bottom: 10px;
}
.product-card h4 {
  color: #ff66a8;
  margin-bottom: 10px;
}
.btn-play {
  background: #ff66a8;
  color: #000;
  border: none;
  border-radius: 4px;
  padding: 8px 15px;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}
.btn-play:hover {
  background: #ff99c9;
}

/* Modal Thanh Toán */
.payment-notification {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.payment-notification.hidden {
  display: none;
}
.payment-content {
  background: #222;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  color: #fff;
  max-width: 90%;
}
.payment-content h3 {
  margin-bottom: 10px;
  color: #ff66a8;
}
.payment-content p {
  margin-bottom: 15px;
}
.close-btn {
  background: #ff66a8;
  border: none;
  padding: 8px 15px;
  color: #000;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.3s;
}
.close-btn:hover {
  background: #ff99c9;
}
.close-btn.hidden {
  display: none;
}

/* Modal Lịch Sử Mua Hàng */
.purchase-history-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9998;
}
.purchase-history-modal.hidden {
  display: none;
}
.purchase-history-content {
  background: #222;
  padding: 20px;
  border-radius: 8px;
  max-width: 95%;
  max-height: 90%;
  overflow-y: auto;
  color: #fff;
  text-align: left;
}
.purchase-history-content h3 {
  margin-bottom: 15px;
  color: #ff66a8;
}
.purchase-history-item {
  border-bottom: 1px solid #444;
  padding: 10px 0;
  margin-bottom: 10px;
}
.purchase-history-item:last-child {
  border-bottom: none;
}
.purchase-history-item i {
  margin-right: 5px;
}
.purchase-history-item .status {
  font-weight: bold;
}
.purchase-history-item .status.success {
  color: #66ff66;
}
.purchase-history-item .status.pending {
  color: #ffcc00;
}

/* Thông Báo (Notification) */
#notificationContainer {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
}
.notification {
  background: rgba(0,0,0,0.8);
  padding: 10px 15px;
  border-radius: 5px;
  margin-bottom: 10px;
  color: #fff;
  display: flex;
  align-items: center;
  opacity: 0;
  transform: translateX(100%);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.notification.show {
  opacity: 1;
  transform: translateX(0);
}
.notification.success { background: #66ff66; }
.notification.error { background: #ff6666; }
.notification.warning { background: #ffcc00; color: #000; }
.notification.info { background: #3399ff; }
.notification i {
  margin-right: 8px;
}

/* PHẦN LIÊN HỆ */
.contact {
  padding: 30px 20px;
  background: linear-gradient(-45deg, #000, #222, #444, #111);
  text-align: center;
  color: #fff;
}
.contact-container {
  max-width: 600px;
  margin: 0 auto;
}
.contact h2 {
  font-size: 2rem;
  margin-bottom: 10px;
}
.contact p {
  font-size: 1rem;
  margin-bottom: 20px;
}
.contact-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
}
.contact-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  color: #fff;
  font-size: 1.5rem;
  text-decoration: none;
  transition: transform 0.3s, background 0.3s;
}
.contact-btn:hover {
  transform: scale(1.1);
  background: rgba(255, 255, 255, 0.4);
}
/* Màu riêng cho từng nút */
.contact-btn.facebook { background: #3b5998; }
.contact-btn.instagram { background: #e4405f; }
.contact-btn.twitter { background: #1da1f2; }
.contact-btn.email { background: #333; }


/* FOOTER */
footer {
  background: rgba(0, 0, 0, 0.8);
  padding: 15px;
  text-align: center;
  color: #ff66a8;
  font-weight: bold;
}
// font vip của bố huấn 
         /* Hộp thông báo */
    .notification-box {
      background: rgba(0, 0, 0, 0.6); /* Nền tối trong suốt */
      backdrop-filter: blur(8px); /* Hiệu ứng nền mờ */
      border-radius: 12px;
      padding: 20px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.2);
      text-align: center;
    }

    /* Tiêu đề có icon */
    .notification-title {
      font-size: 1.5rem;
      font-weight: bold;
      color: #ffcc00;
    }

    /* Dòng text */
    .notification-text {
      font-size: 1rem;
      margin: 10px 0;
    }

    /* Liên kết có màu */
    .notification-link {
      font-weight: bold;
      text-decoration: none;
    }

    .red { color: #ff4d4f; }  /* Màu đỏ */
    .blue { color: #40a9ff; } /* Màu xanh */
    .green { color: #52c41a; } /* Màu xanh lá */
    .orange { color: #fa8c16; } /* Màu cam */

    /* Hover đẹp */
    .notification-link:hover {
      text-decoration: underline;
    }
// icon 3 ghech
        /* Thanh điều hướng */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #111;
    }

    /* Icon 3 gạch */
    .menu-icon {
      font-size: 1.8rem;
      cursor: pointer;
      color: #ffcc00;
    }

    /* Sidebar menu */
    .sidebar {
      position: fixed;
      top: 0;
      left: -250px; /* Ẩn ban đầu */
      width: 250px;
      height: 100%;
      background: #333;
      box-shadow: 2px 0px 5px rgba(255, 255, 255, 0.2);
      padding-top: 50px;
      transition: left 0.3s ease-in-out;
    }

    .sidebar.active {
      left: 0; /* Hiện menu */
    }

    .sidebar a {
      display: block;
      color: white;
      padding: 15px 20px;
      text-decoration: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar a:hover {
      background: #444;
    }

    /* Nút đóng menu */
    .dong-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: white;
    }

    .dong-btn:hover {
      color: red;
    }

    /* Cửa sổ cảnh báo */
    .warning-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      max-width: 400px;
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 10px;
      display: none; /* Ẩn ban đầu */
      text-align: center;
      box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
    }

    /* Nút đóng thông báo */
    .warning-box .close-warning {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: white;
    }

    .warning-box .close-warning:hover {
      color: red;
    }

    /* Nội dung cảnh báo */
    .warning-content {
      font-size: 1rem;
      line-height: 1.5;
    }

    .warning-content span {
      font-weight: bold;
    }

    .red { color: red; }
    .blue { color: blue; }
    .yellow { color: yellow; }
    .green { color: lime; }
// thông báo  huấn hà 
    
  
// đánh giá 5* cho bố
/* Phần đánh giá & bình luận */
.review-section {
  border: 1px solid #fff;
  padding: 15px;
  margin: 20px auto;
  background: #f9f9f9;
  border-radius: 5px;
  max-width: 600px;
}

.review-section h2 {
  margin-bottom: 15px;
  font-size: 24px;
  color: #333;
  text-align: center;
}

.rating {
  display: flex;
  gap: 5px;
  margin-bottom: 10px;
  justify-content: center;
}

.rating .star {
  font-size: 28px;
  cursor: pointer;
  color: #ccc;
  transition: color 0.2s ease;
}

.rating .star.selected,
.rating .star.hovered {
  color: gold;
}

#reviewText {
  width: 100%;
  min-height: 80px;
  border: 1px solid #ccc;
  border-radius: 5px;
  padding: 8px;
  margin-bottom: 10px;
  resize: vertical;
  font-size: 16px;
}

#reviewForm button {
  background: #ff6600;
  border: none;
  color: #fff;
  padding: 10px 15px;
  border-radius: 5px;
  cursor: pointer;
  display: block;
  margin: 0 auto;
  font-size: 16px;
}

/* Khung chứa danh sách đánh giá, cho phép cuộn nếu có quá nhiều bình luận */
.review-list {
  margin-top: 20px;
  max-height: 300px;      
  overflow-y: auto;       
  padding-right: 10px;    
  border-top: 1px solid #ddd;
}

.review-item {
  border: 1px solid #ddd;
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 5px;
  background: #fff;
}

/* Header hiển thị email và ngày gửi, căn đều hai bên */
.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 5px;
}

.review-email {
  font-weight: bold;
  color: #333;
}

.review-date {
  font-size: 14px;
  color: #999;
}

/* Các phần khác vẫn giữ nguyên */
.review-rating {
  margin: 5px 0;
}

.review-rating i {
  color: gold;
  margin-right: 2px;
}

.review-text {
  margin-top: 5px;
  font-size: 16px;
  color: #555;
}

.review-item .review-email {
  font-weight: bold;
  color: #333;
}

.review-item .review-rating {
  margin: 5px 0;
}

.review-item .review-rating i {
  color: gold;
  margin-right: 2px;
}

.review-item .review-text {
  margin-top: 5px;
  font-size: 16px;
  color: #555;
}

// ảnh đẹp bố ne content
    // xhats admin
/* Ẩn phần tử */
.acc-hidden {
  display: none;
}


/* Modal chứa thông tin tài khoản */
.account-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.account-modal.show {
  opacity: 1;
}
.account-modal.acc-hidden {
  display: none;
}

/* Nội dung modal */
.acc-modal-content {
  background: #fff;
  padding: 20px 30px;
  border-radius: 10px;
  position: relative;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
.acc-close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #333;
}
.acc-modal-content h3 {
  margin-top: 0;
  text-align: center;
  color: #333;
}
.acc-modal-content p {
  font-size: 16px;
  margin: 10px 0;
  color: #555;
}
// cuộn trang wbe
    /* Container cho hình ảnh dạng tròn */
/* Container cho ảnh hình tròn với nền trắng */
.round-image-container {
  width: 15px;               
  height: 15px;
  margin: 8px auto;          
  border-radius: 50%;         
  overflow: hidden;           
  border: 2px solid #ddd;     
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  
  /* Đặt nền trắng để khi nhân màu, ảnh giữ nguyên màu gốc */
  background: #fff;
  /* isolation giúp mix-blend-mode hoạt động độc lập */
  isolation: isolate;
}

/* Định dạng cho ảnh bên trong container */
.round-image-container img {
  width: 15%;
  height: 15%;
  object-fit: cover;
  
  
}
// gửi bill
    /* Style cho nút đăng nhập */
    #dangnhap1 {
      background-color: none;
      color: none;
      border: 1px solid #ddd;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0px 2px 4px rgba(0,0,0,0.1);
      transition: background-color 0.3s;
    }
    #dangnhap1:hover {
      background-color: #f7f7f7;
    }
 // Thông Báo Nâng Cấp 

     /* Icon thông báo với hiệu ứng lắc tự động */
    .notification-icon {
      position: relative;
      background: none;
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 28px;
      color: #333;
      animation: shake 2s infinite;
    }
    @keyframes shake {
      0% { transform: translate(0, 0); }
      25% { transform: translate(2px, -2px); }
      50% { transform: translate(-2px, 2px); }
      75% { transform: translate(2px, 2px); }
      100% { transform: translate(0, 0); }
    }
    .notification-icon .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: red;
      color: #fff;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 12px;
    }
    /* Panel thông báo: id và class đổi thành hienthitudong, hiển thị ở giữa */
    .hienthitudong {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      background: #fff;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 100;
      padding: 15px;
      display: none;
    }
    .hienthitudong.show {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    .hienthitudong .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .hienthitudong .header h3 {
      margin: 0;
      font-size: 18px;
      color: #333;
    }
    .hienthitudong .close-btn {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #333;
      transition: color 0.3s ease;
    }
    .hienthitudong .close-btn:hover {
      color: #999;
    }
    .hienthitudong ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .hienthitudong ul li {
      padding: 8px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      color: #555;
    }
    .hienthitudong ul li:last-child {
      border-bottom: none;
    }

    // nạp tiền 

/* Overlay bao phủ toàn bộ trang */
    /* Overlay bao phủ toàn bộ trang */
.hidden {
  display: none;
}
    #notification-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.5);  /* Nền mờ */
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    /* Hiệu ứng ẩn overlay khi thêm class .hide */
    #notification-overlay.hide {
      opacity: 0;
      transform: scale(0.8);
      pointer-events: none;
    }
    
    /* Hộp thông báo */
    #notification-box {
      background: #fff;
      padding: 20px 30px;
      border-radius: 2px;
      position: relative;
      text-align: center;
      max-width: 90%;
      box-sizing: border-box;
    }
    
    /* Nút tắt (close) */
    #notification-box .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #888;
    }
    #notification-box .close-btn:hover {
      color: #333;
    }
   
     
</style>
  </head>
  <body>
<!-- Overlay thông báo -->
  <div id="notification-overlay">
    <div id="notification-box">
      <button class="close-btn">
<a>
        <i class="fas fa-times-circle"></i>
</a>
      </button>
      <span style="color: black; font-size: 30px; font-weight: bold;">SHOP HUẤN HÀ VN</span>
<div style="width: 100%; height: 2px; background: yellow; margin: 20px 0;"></div>
<i class="fas fa-arrow-right" style="color: red; font-size: 24px;"></i><span style="color: blue; font-size: 30x; font-weight: bold;">HUẤN HÀ UY TÍN SỐ 1 VIỆT NAM 
HỖ TRỢ SUPORT NHIỆT TÌNH KHI MUA 
CUNG CẤP MỌI LOẠI ĐỒ CHƠI KÉO NHẸ FULL ĐỎ CHỈ CÓ TẠI SHOP HUẤN HÀ XỬ LÍ AOTU TỰ ĐỘNG KHI MUA</span>
<div style="width: 100%; height: 2px; background: yellow; margin: 20px 0;"></div>
<i class="fas fa-arrow-right" style="color: red; font-size: 24px;"></i><span style="color: blue; font-size: 30x; font-weight: bold;">HỖ TRỢ ĐÀO TẠO HỌC VIÊN 
TẠO DATA GAME VÀ TẠO CODER 
HỖ TRỢ TẠO WEB BIO 
WEB BÁN ĐỒ CHƠI GIÁ RẺ </span>
<div style="width: 100%; height: 2px; background: yellow; margin: 20px 0;"></div>
<i class="fas fa-arrow-right" style="color: red; font-size: 24px;"></i><span style="color: blue; font-size: 30x; font-weight: bold;">LIÊN HỆ VỚI CHUNG TÔI QUA SỐ ĐIỆN THOẠI<i class="fas fa-phone" style="color: lime; font-size: 20px;"></i> : 0325575642</span>
    </div>
  </div>

    <!-- Menu Sidebar (ẩn) -->
    <div class="sidebar" id="sidebar">
      <span class="dong-btn" onclick="toggleMenu()">
        <i class="fa-solid fa-xmark"></i>
      </span>
      <a href="#">
      <i class="fa-solid fa-landmark"></i> Nạp Tiền
</a>
      <a href="#" onclick="openWarning()"><i class="fa-solid fa-triangle-exclamation"></i> Lưu Ý Khi Mua</a>
<!-- Nút Hỗ Trợ -->
  <a href="https://www.facebook.com/profile.php?id=61561543393412" class="support-btn" target="_blank">
    <i class="fa-solid fa-headset"></i> Hỗ Trợ    
<!-- Header chứa tiêu đề và icon thông tin tài khoản -->
    
      <a><div id="accountInfoIcon" class="account-info-icon">
        <i class="fa-solid fa-info-circle"></i>Thông Tin
      </div>
</a>
<a href="index.html" style="text-decoration: none; font-size: 15px; color: white;">
  <i class="fas fa-home"></i> Trang chủ
</a>
</a>
<a href="shophang.html" style="text-decoration: none; font-size: 15px; color: white;">
  <i class="fas fa-shopping-cart"></i> Mua Vip
</a>
<a href="lienhe.html" style="text-decoration: none; font-size: 15px; color: white;">
  <i class="fas fa-user-shield"></i> Liên Hệ Admin
<a>
  <li>
              <button id="btnPurchaseHistory" class="nav-btn">
                <i class="fas fa-calendar-alt"></i>
              Lịch Sử Mua Hàng</button>
            </li>
</a>
</div>
<!-- Modal hiển thị thông tin tài khoản -->
    <div id="accountInfoModal" class="account-modal acc-hidden">
      <div class="acc-modal-content">
        <button id="accountInfoClose" class="acc-close-btn">
          <i class="fa-solid fa-xmark"></i>
        </button>
        <h3>Thông tin tài khoản</h3>
        <p>Email: <span id="accountEmailDisplay"></span></p>
        <p>Mật khẩu: <span id="accountPasswordDisplay"></span></p>
        <p>Ngày đăng ký: <span id="accountRegisterTime"></span></p>
      </div>
    </div>
    <!-- Modal Cảnh Báo (Lưu Ý Khi Mua) -->
    <div class="warning-box" id="warningBox">
      <span class="close-warning" onclick="closeWarning()">
        <i class="fa-solid fa-xmark"></i>
      </span>
      <p class="warning-content">
        <span class="red"><i class="fa-solid fa-triangle-exclamation"></i> CẢNH BÁO:</span> Vui lòng đọc kỹ thông tin trước khi mua!  
        <br>
        <span class="blue">Kiểm tra chuyển khoản đúng số tài khoản & nội dung.</span>  
        <br>
        <span class="yellow">Chỉ cần ấn Mua Ngay và chuyển đúng số tiền, mã giao dịch sẽ được xử lý nhanh chóng.</span>  
        <br>
        <span class="green">Liên hệ admin nếu gặp lỗi.</span>
        <a href="https://www.facebook.com/profile.php?id=61561543393412" class="label-link" target="_blank">
          <i class="fa-brands fa-facebook"></i> Tại Đây
        </a>
      </p>
    </div>

    <!-- Hiệu ứng nền động -->
    <div class="background-animation"></div>

    <!-- HEADER -->
    <header>
      <div class="top-bar">
        <div class="logo">
          <!-- Thanh điều hướng -->
  <div class="navbar">
    <div class="menu-icon" onclick="toggleMenu()">
      <i class="fa-solid fa-bars"></i> <!-- Icon 3 gạch -->
    </div>
  </div>
          <h1> HUẤN HÀ </h1>
        </div>
        <nav class="nav-links">
          <ul>
            
            <!-- Hiển thị thông tin user -->
            <li id="userInfo" class="nav-btn hidden">
              <i class="fas fa-user"></i> <span id="userName"></span>
            </li>
            <li>
              <button id="btnLogout" class="nav-btn hidden">
                <i class="fas fa-sign-out-alt"></i>
              </button>
            </li>
          </ul>
        </nav>
        </div>
      </div>
    </header>
    </header>

    <!-- PHẦN ĐĂNG KÝ / ĐĂNG NHẬP -->
    <section id="authSection" class="auth-section">
      <!-- Form Đăng ký -->
      <div id="signupForm" class="auth-form">
        <h2>Đăng Ký</h2>
        <div class="input-group">
          <label for="signupEmail"><i class="fas fa-envelope"></i> Email</label>
          <input type="email" id="signupEmail" placeholder="Nhập Email" />
        </div>
        <div class="input-group">
          <label for="signupPassword"><i class="fas fa-lock"></i> Mật Khẩu</label>
          <input type="password" id="signupPassword" placeholder="Nhập Mật Khẩu" />
        </div>
        <button id="btnSignUp" class="auth-btn">
          <i class="fas fa-user-plus"></i> Đăng Ký
        </button>
        <p class="switch-text">
          Đã có tài khoản?
          <span id="switchToLogin" class="switch-link">Đăng Nhập</span>
        </p>
      </div>

      <!-- Form Đăng nhập -->
      <div id="loginForm" class="auth-form hidden">
        <h2>Đăng Nhập</h2>
        <div class="input-group">
          <label for="loginEmail"><i class="fas fa-envelope"></i> Email</label>
          <input type="email" id="loginEmail" placeholder="Nhập Email" />
        </div>
        <div class="input-group">
          <label for="loginPassword"><i class="fas fa-lock"></i> Mật Khẩu</label>
          <input type="password" id="loginPassword" placeholder="Nhập Mật Khẩu" />
        </div>
        <button id="btnLogin" class="auth-btn">
          <i class="fas fa-sign-in-alt"></i> Đăng Nhập
        </button>
        <p class="switch-text">
          Chưa có tài khoản?
          <span id="switchToSignup" class="switch-link">Đăng Ký</span>
        </p>
      </div>

      <!-- Thông báo lỗi/trạng thái -->
      <div id="authMessage" class="auth-message"></div>
    </section>

    <!-- PHẦN SHOP (sau khi đăng nhập thành công) -->
    <section id="shopSection" class="shop-section hidden">
 <div class="notification-box">
    <div class="notification-title">
      <i class="fa-solid fa-star"></i> Welcome <span class="blue">SHOPHUANHA</span>
<i class="fa-solid fa-star"></i>
    </div>
  <!-- Container hình ảnh tròn -->
  <div class="round-image-container">
    <!-- Thay đường dẫn src bằng hình ảnh có nền trắng -->
    <img src="https://research.mgu.ac.in/wp-content/uploads/2021/07/new-icon-gif-9.gif" alt="Hình Ảnh Không Nền Trắng">
    </div>
    <div class="notification-text">
      <span class="orange"><u>Lưu Ý Khi Mua</u></span>
    </div>

    <div class="notification-text">
      Nhóm Hỗ Trợ: <a href="https://t.me/huanhasuport" class="notification-link blue">Nhấn Vào Đây</a>
    </div>

    <div class="notification-text">
      Nạp Tiền: <a href="#" class="notification-link red">Thẻ Cào</a> - <a href="#" class="notification-link orange">Bank ATM</a>
    </div>
  </div>
      <!-- Marquee chữ chạy -->
      <div class="marquee-container">
        <span id="marquee-text"></span>
      </div>

      <!-- DANH MỤC FREE FIRE -->
      <div class="product-section">
        <h2>ĐỒ CHƠI FREE FIRE</h2>
        <div class="yellow-bar"></div>
      <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Free Fire 3" />
            <h4>AIM IMAZING VIP PRO HEAD | <span style="color: red;">150.000₫</span></h4>
            <button class="btn-play" data-product="IMAZING150K" data-download="https://fnote.org/notes/HxkB9C">
              <i class="fas fa-shopping-cart"></i> Mua Ngay
            </button>
          </div>
          <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Free Fire 2" />
            <h4>AIM IMAZING VIP ANTIBAND 90% | <span style="color: red;">250.000₫</span></h4>
            <button class="btn-play" data-product="IMAZING250K" data-download="https://fnote.org/notes/HxkB9C">
              <i class="fas fa-shopping-cart"></i>Mua Ngay
            </button>
          </div>
          <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Free Fire 3" />
            <h4>AIM IMAZING GHIM ĐẦU 99% ANTIBAND  | <span style="color: red;">400.000₫</span></h4>
            <button class="btn-play" data-product="IMAZING400K" data-download="https://fnote.org/notes/HxkB9C">
              <i class="fas fa-shopping-cart"></i> Mua Ngay
            </button>
          </div>
        </div>
      </div>

      <!-- DANH MỤC KHÁC -->
      <div class="product-section">
        <h3>DANH MỤC SUPER</h3>
        <div class="yellow-bar"></div>
        <div class="product-grid">
          <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Other 1" />
            <h4>IMAZING VIP AIM GHIM ĐẦU ANTIBADN SỬ DỤNG (4OB) | <span style="color: red;">500K.000₫</span></h4>
            <button class="btn-play" data-product="IMAZING500K" data-download="https://fnote.org/notes/HxkB9C">
              <i class="fas fa-shopping-cart"></i> Chơi Ngay
            </button>
          </div>
          <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Other 2" />
            <h4> IMAZING HESOT GHIM ĐẦU (516) | <span style="color: red;">800.000₫</span></h4>
            <button class="btn-play" data-product="IMAZING800K" data-download="https://fnote.org/notes/HxkB9C">
              <i class="fas fa-shopping-cart"></i> Mua Ngay
            </button>
          </div>
  <div class="product-card">
            <img src="https://i.imgur.com/Sd431D9.jpeg" alt="Other 2" />
            <h4> IMAZING AIM BODY ANTIBAND (531) | <span style="color: red;">200.000₫</span></h4>
            <button class="btn-play" data-product="IMAZINGBODY200" data-download="https://fnote.org/notes/9d9wSQ">
              <i class="fas fa-shopping-cart"></i> Mua Ngay
            </button>
          </div>
        </div>
      </div>
<!-- Phần đánh giá & bình luận -->
    <div id="reviewSection" class="review-section">
      <h2>Đánh Giá & Bình Luận</h2>
      <form id="reviewForm">
        <div class="rating">
          <span class="star" data-value="1"><i class="fa-regular fa-star"></i></span>
          <span class="star" data-value="2"><i class="fa-regular fa-star"></i></span>
          <span class="star" data-value="3"><i class="fa-regular fa-star"></i></span>
          <span class="star" data-value="4"><i class="fa-regular fa-star"></i></span>
          <span class="star" data-value="5"><i class="fa-regular fa-star"></i></span>
        </div>
        <textarea id="reviewText" placeholder="Nhập bình luận của bạn" required></textarea>
        <button type="submit">Gửi đánh giá</button>
      </form>
      <div id="reviewList" class="review-list">
        <!-- Danh sách đánh giá sẽ hiển thị tại đây -->
      </div>
<!-- Nút Chat Online (hiển thị ở góc dưới bên phải) -->
<!-- Nút Chat Support (dành cho người dùng) -->
     

    </section>
    <!-- PHẦN THÔNG BÁO THANH TOÁN (Modal) -->
    <div id="paymentNotification" class="payment-notification hidden">
      <div class="payment-content">
        <h3>Thanh Toán</h3>
        <p id="paymentMessage"></p>
        <!-- Nút Download sẽ xuất hiện sau khi giao dịch thành công -->
        <a id="downloadBtn" class="download-btn hidden" target="_blank">
          <i class="fa-solid fa-download"></i> Download
        </a>
        <button id="closePaymentNotification" class="close-btn hidden">
          <i class="fas fa-times"></i> Đóng
        </button>
      </div>
    </div>

    <!-- PHẦN LỊCH SỬ MUA HÀNG (Modal) -->
    <div id="purchaseHistoryModal" class="purchase-history-modal hidden">
      <div class="purchase-history-content">
        <h3>Lịch Sử Mua Hàng</h3>
        <div id="purchaseHistoryList"></div>
        <button id="closePurchaseHistory" class="close-btn">
          <i class="fas fa-times"></i> Đóng
        </button>
      </div>
    </div>

    <!-- PHẦN THÔNG BÁO (Notification) -->
    <div id="notificationContainer"></div>
    
    <!-- PHẦN LIÊN HỆ -->
    <section id="contact" class="contact">
      <div class="contact-container">
        <h2>Liên Hệ Với Chúng Tôi</h2>
        <p>Nhấp vào các liên kết bên dưới:</p>
        <div class="contact-buttons">
          <a href="https://www.facebook.com/profile.php?id=61561543393412" target="_blank" class="contact-btn facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com" target="_blank" class="contact-btn instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://www.twitter.com" target="_blank" class="contact-btn twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="vanhuanha56@gmail.com" target="_blank" class="contact-btn email">
            <i class="fas fa-envelope"></i>
          </a>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <p>© SHOP HUẤN HÀ VN - TRÙM UY TÍN</p>
    </footer>

    <!-- File JS -->
    <script src="script.js"></script>
<script>
/***********************************************************
 * Hệ thống Thông Báo (Notification)
 ***********************************************************/
function showNotification(type, message) {
  const container = document.getElementById("notificationContainer");
  const notification = document.createElement("div");
  notification.classList.add("notification", type);
  notification.innerHTML = `<i class="${getIcon(type)}"></i> ${message}`;
  container.appendChild(notification);

  // Hiệu ứng xuất hiện
  setTimeout(() => {
    notification.classList.add("show");
  }, 100);

  // Tự động ẩn sau 3 giây
  setTimeout(() => {
    notification.classList.remove("show");
    setTimeout(() => notification.remove(), 500);
  }, 3000);
}

function getIcon(type) {
  switch (type) {
    case "success":
      return "fas fa-check-circle";
    case "error":
      return "fas fa-times-circle";
    case "warning":
      return "fas fa-exclamation-triangle";
    case "info":
      return "fas fa-info-circle";
    default:
      return "fas fa-info-circle";
  }
}

/***********************************************************
 * Hiệu ứng Marquee cho chữ chạy
 ***********************************************************/
const marqueeTextElement = document.getElementById("marquee-text");
const marqueeTextContent = "Shop Huấn Hà Uy Tín Số 1 Việt Nam ";
let marqueeIndex = 0;
function typeMarquee() {
  marqueeTextElement.innerText = marqueeTextContent.substring(0, marqueeIndex);
  marqueeIndex++;
  if (marqueeIndex > marqueeTextContent.length) {
    marqueeIndex = 0;
  }
  setTimeout(typeMarquee, 150);
}
typeMarquee();

/***********************************************************
 * Chuyển đổi giữa form Đăng ký & Đăng nhập
 ***********************************************************/
const signupForm = document.getElementById("signupForm");
const loginForm = document.getElementById("loginForm");
const switchToLogin = document.getElementById("switchToLogin");
const switchToSignup = document.getElementById("switchToSignup");

switchToLogin.addEventListener("click", () => {
  signupForm.classList.add("hidden");
  loginForm.classList.remove("hidden");
  clearMessage();
});
switchToSignup.addEventListener("click", () => {
  loginForm.classList.add("hidden");
  signupForm.classList.remove("hidden");
  clearMessage();
});
function clearMessage() {
  document.getElementById("authMessage").textContent = "";
}

/***********************************************************
 * Đăng ký / Đăng nhập với Firebase
 ***********************************************************/
const authMessage = document.getElementById("authMessage");
const btnSignUp = document.getElementById("btnSignUp");
const btnLogin = document.getElementById("btnLogin");

btnSignUp.addEventListener("click", async () => {
  const email = document.getElementById("signupEmail").value;
  const password = document.getElementById("signupPassword").value;
  try {
    const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
    const user = userCredential.user;
    authMessage.style.color = "#66ff66";
    authMessage.textContent = "Đăng ký thành công! Vui lòng chờ...";
    showNotification("success", "Đăng ký thành công!");
    // Tạo tên user ngẫu nhiên và lưu vào Database
    const randomUsername = "User" + Math.floor(Math.random() * 100000);
    await firebase.database().ref('users/' + user.uid).set({
      username: randomUsername,
      email: user.email,
      createdAt: firebase.database.ServerValue.TIMESTAMP
    });
  } catch (error) {
    authMessage.style.color = "#ff6666";
    authMessage.textContent = "Lỗi: " + error.message;
    showNotification("error", "Lỗi đăng ký: " + error.message);
  }
});

btnLogin.addEventListener("click", async () => {
  const email = document.getElementById("loginEmail").value;
  const password = document.getElementById("loginPassword").value;
  try {
    await firebase.auth().signInWithEmailAndPassword(email, password);
    authMessage.style.color = "#66ff66";
    authMessage.textContent = "Đăng nhập thành công! Vui lòng chờ...";
    showNotification("success", "Đăng nhập thành công!");
  } catch (error) {
    authMessage.style.color = "#ff6666";
    authMessage.textContent = "Lỗi: " + error.message;
    showNotification("error", "Lỗi đăng nhập: " + error.message);
  }
});

/***********************************************************
 * Theo dõi trạng thái đăng nhập (onAuthStateChanged)
 ***********************************************************/
const authSection = document.getElementById("authSection");
const shopSection = document.getElementById("shopSection");
const btnLogout = document.getElementById("btnLogout");

firebase.auth().onAuthStateChanged((user) => {
  if (user) {
    authSection.classList.add("hidden");
    shopSection.classList.remove("hidden");
    btnLogout.classList.remove("hidden");
    // Lấy tên user từ Database và hiển thị
    firebase.database().ref('users/' + user.uid + '/username').once('value')
      .then(snapshot => {
        const username = snapshot.val();
        document.getElementById("userName").textContent = username;
        document.getElementById("userInfo").classList.remove("hidden");
      });
  } else {
    authSection.classList.remove("hidden");
    shopSection.classList.add("hidden");
    btnLogout.classList.add("hidden");
    document.getElementById("userInfo").classList.add("hidden");
  }
});

/***********************************************************
 * Đăng xuất
 ***********************************************************/
btnLogout.addEventListener("click", async () => {
  await firebase.auth().signOut();
  showNotification("info", "Đã đăng xuất!");
});

/***********************************************************
 * Xử lý sự kiện “Mua Ngay” / “Chơi Ngay”
 ***********************************************************/
document.querySelectorAll('.btn-play').forEach((btn) => {
  btn.addEventListener('click', async function() {
    const user = firebase.auth().currentUser;
    if (!user) {
      alert("Bạn cần đăng nhập trước!");
      return;
    }
    const productId = this.getAttribute('data-product');
    const downloadLink = this.getAttribute('data-download');
    this.disabled = true;
    
    // Hiển thị modal thanh toán
    showPaymentNotification(productId);
    
    // Tạo dữ liệu giao dịch
    const purchaseData = {
      status: false,
      bankInfo: "Ngân hàng Mbbank - STK: 0325575642 - Nội dung: Thanh toán " + productId,
      userEmail: user.email,
      purchaseTime: firebase.database.ServerValue.TIMESTAMP,
      productId: productId
    };
    const purchaseRef = firebase.database().ref('purchases/' + user.uid + '/' + productId);
    await purchaseRef.set(purchaseData);
    
    // Polling: Kiểm tra trạng thái giao dịch mỗi 3 giây
    const pollInterval = setInterval(() => {
      purchaseRef.once('value').then(snapshot => {
        const data = snapshot.val();
        if (data && data.status === true) {
          updatePaymentNotificationSuccess(productId, data, downloadLink);
          showNotification("success", "Thanh toán thành công cho sản phẩm " + productId);
          clearInterval(pollInterval);
        }
      });
    }, 3000);
  });
});

/***********************************************************
 * Hàm hiển thị modal thanh toán
 ***********************************************************/
function showPaymentNotification(productId) {
  const modal = document.getElementById('paymentNotification');
  const messageP = document.getElementById('paymentMessage');
  modal.classList.remove('hidden');
  messageP.innerHTML = `Vui lòng chuyển khoản đến:<br/>
    <strong>Ngân hàng Mbbank</strong><br/>
    Số tài khoản: <strong>0325575642</strong><br/>
    Nội dung chuyển khoản: <strong>${productId}</strong><br/>
    Email: <strong>${firebase.auth().currentUser.email}</strong><br/>
    <i class="fas fa-spinner fa-spin"></i> Đang xử lý...`;
  document.getElementById('closePaymentNotification').classList.add('hidden');
  // Ẩn nút download nếu có
  document.getElementById('downloadBtn').classList.add('hidden');
}

/***********************************************************
 * Hàm cập nhật modal thanh toán khi giao dịch thành công (status:true)
 * Thêm nút Download với link tải riêng
 ***********************************************************/
function updatePaymentNotificationSuccess(productId, data, downloadLink) {
  const modal = document.getElementById('paymentNotification');
  const messageP = document.getElementById('paymentMessage');
  
  // Chuyển đổi timestamp thành thời gian đọc được
  const purchaseTime = new Date(data.purchaseTime);
  const timeString = purchaseTime.toLocaleString();
  
  messageP.innerHTML = `<i class="fas fa-check"></i> Thanh toán thành công cho sản phẩm <strong>${productId}</strong><br/>
    Email: <strong>${data.userEmail}</strong><br/>
    Thời gian: <strong>${timeString}</strong>`;
  
  // Hiển thị nút Download với link tải cụ thể
  const downloadBtn = document.getElementById('downloadBtn');
  downloadBtn.href = downloadLink;
  downloadBtn.classList.remove('hidden');
  
  // Hiển thị nút Đóng modal
  document.getElementById('closePaymentNotification').classList.remove('hidden');
}

/***********************************************************
 * Đóng modal thanh toán khi nhấn nút “Đóng”
 ***********************************************************/
document.getElementById('closePaymentNotification').addEventListener('click', () => {
  document.getElementById('paymentNotification').classList.add('hidden');
});

/***********************************************************
 * Xử lý nút “Xem Lịch Sửa Mua Hàng”
 ***********************************************************/
document.getElementById('btnPurchaseHistory').addEventListener('click', async () => {
  const user = firebase.auth().currentUser;
  if (!user) {
    alert("Bạn cần đăng nhập để xem lịch sử mua hàng!");
    return;
  }
  const historyRef = firebase.database().ref('purchases/' + user.uid);
  const snapshot = await historyRef.once('value');
  const historyData = snapshot.val();
  
  const historyListDiv = document.getElementById('purchaseHistoryList');
  historyListDiv.innerHTML = "";
  
  if (historyData) {
    Object.keys(historyData).forEach(productId => {
      const data = historyData[productId];
      const purchaseTime = new Date(data.purchaseTime);
      const timeString = purchaseTime.toLocaleString();
      const statusIcon = data.status ? '<i class="fas fa-check" style="color:#66ff66;"></i>' : '<i class="fas fa-spinner fa-spin" style="color:#ffcc00;"></i>';
      
      const itemDiv = document.createElement("div");
      itemDiv.classList.add("purchase-history-item");
      itemDiv.innerHTML = `
        <p><i class="fas fa-box"></i> Sản phẩm: <strong>${productId}</strong></p>
        <p><i class="fas fa-envelope"></i> Email: <strong>${data.userEmail}</strong></p>
        <p><i class="fas fa-university"></i> Ngân hàng: <strong>${data.bankInfo}</strong></p>
        <p><i class="fas fa-clock"></i> Thời gian: <strong>${timeString}</strong></p>
        <p>Trạng thái: <span class="status ${data.status ? "success" : "pending"}">${statusIcon} ${data.status ? "Thành công" : "Đang xử lý"}</span></p>
      `;
      historyListDiv.appendChild(itemDiv);
    });
  } else {
    historyListDiv.innerHTML = "<p>Không có giao dịch nào.</p>";
  }
  
  document.getElementById('purchaseHistoryModal').classList.remove('hidden');
});

/***********************************************************
 * Đóng modal lịch sử mua hàng khi nhấn nút “Đóng”
 ***********************************************************/
document.getElementById('closePurchaseHistory').addEventListener('click', () => {
  document.getElementById('purchaseHistoryModal').classList.add('hidden');
});
function toggleMenu() {
      document.getElementById("sidebar").classList.toggle("active");
    }

    function openWarning() {
      document.getElementById("warningBox").style.display = "block";
    }

    function closeWarning() {
      document.getElementById("warningBox").style.display = "none";
    }
  // thông báo 

      // Hiển thị thông báo tự động khi trang được tải

// đánh giá 5* 
document.addEventListener('DOMContentLoaded', function() {
  // --- Xử lý chọn số sao ---
  var stars = document.querySelectorAll('.rating .star');
  var selectedRating = 0;
  
  stars.forEach(function(star) {
    star.addEventListener('click', function() {
      selectedRating = this.getAttribute('data-value');
      updateStarSelection(selectedRating);
    });
    star.addEventListener('mouseover', function() {
      var hoverValue = this.getAttribute('data-value');
      updateStarHover(hoverValue);
    });
    star.addEventListener('mouseout', function() {
      updateStarSelection(selectedRating);
    });
  });
  
  function updateStarSelection(rating) {
    stars.forEach(function(star) {
      if (star.getAttribute('data-value') <= rating) {
        star.classList.add('selected');
      } else {
        star.classList.remove('selected');
      }
    });
  }
  
  function updateStarHover(hoverValue) {
    stars.forEach(function(star) {
      if (star.getAttribute('data-value') <= hoverValue) {
        star.classList.add('hovered');
      } else {
        star.classList.remove('hovered');
      }
    });
  }
  
  // --- Xử lý gửi đánh giá lên Firebase ---
  var reviewForm = document.getElementById('reviewForm');
  var reviewList = document.getElementById('reviewList');
  
  reviewForm.addEventListener('submit', function(e) {
    e.preventDefault();
    var reviewText = document.getElementById('reviewText').value;
    // Lấy email người dùng từ Firebase Auth nếu đã đăng nhập, nếu không thì hiển thị "Khách vãng lai"
    var user = firebase.auth().currentUser;
    var email = user ? user.email : "Khách vãng lai";
    
    // Tạo đối tượng đánh giá
    var reviewObj = {
      email: email,
      rating: selectedRating,
      text: reviewText,
      timestamp: firebase.database.ServerValue.TIMESTAMP
    };
    
    // Lưu vào Firebase (nút 'reviews')
    firebase.database().ref('reviews').push(reviewObj)
      .then(function() {
        // Xóa form sau khi gửi
        reviewForm.reset();
        selectedRating = 0;
        updateStarSelection(0);
      })
      .catch(function(error) {
        console.error('Lỗi gửi đánh giá:', error);
      });
  });
  
  // --- Hàm hiển thị đánh giá ---
  // Hàm hiển thị đánh giá (bình luận) với ngày gửi
function displayReview(reviewId, reviewData) {
  var div = document.createElement('div');
  div.classList.add('review-item');

  // Tạo HTML hiển thị số sao
  var ratingHTML = '';
  for (var i = 1; i <= reviewData.rating; i++) {
    ratingHTML += '<i class="fa-solid fa-star"></i>';
  }
  for (var i = reviewData.rating; i < 5; i++) {
    ratingHTML += '<i class="fa-regular fa-star"></i>';
  }

  // Chuyển đổi timestamp thành định dạng ngày giờ dễ đọc
  var date = new Date(reviewData.timestamp);
  var formattedDate = date.toLocaleString(); // Bạn có thể thay đổi định dạng nếu cần

  // Hiển thị email, ngày gửi, đánh giá sao và nội dung bình luận
  div.innerHTML = `
    <div class="review-header">
      <div class="review-email">${reviewData.email}</div>
      <div class="review-date">${formattedDate}</div>
    </div>
    <div class="review-rating">${ratingHTML}</div>
    <div class="review-text">${reviewData.text}</div>
  `;

  reviewList.appendChild(div);
}
// --- Lắng nghe đánh giá mới từ Firebase ---
  firebase.database().ref('reviews').on('child_added', function(snapshot) {
    var reviewData = snapshot.val();
    displayReview(snapshot.key, reviewData);
  });
});

// chat  với huấn hà 
 // thông báo
document.addEventListener("DOMContentLoaded", function () {
  const accountInfoIcon = document.getElementById("accountInfoIcon");
  const accountInfoModal = document.getElementById("accountInfoModal");
  const accountInfoClose = document.getElementById("accountInfoClose");
  const accountEmailDisplay = document.getElementById("accountEmailDisplay");
  const accountPasswordDisplay = document.getElementById("accountPasswordDisplay");
  const accountRegisterTime = document.getElementById("accountRegisterTime");

  // Hàm mở modal và hiển thị thông tin tài khoản từ Firebase
  function openAccountInfoModal() {
    const currentUser = firebase.auth().currentUser;
    if (!currentUser) {
      alert("Bạn cần đăng nhập để xem thông tin tài khoản.");
      return;
    }
    // Lấy dữ liệu người dùng từ Firebase (giả sử dữ liệu được lưu tại node "users/{uid}" với các trường email, password, registerTime)
    firebase.database().ref("users/" + currentUser.uid).on("value", function (snapshot) {
      const userData = snapshot.val();
      if (userData) {
        accountEmailDisplay.textContent = userData.email;
        accountPasswordDisplay.textContent = userData.password; // Lưu ý: chỉ sử dụng cho demo; không nên lưu mật khẩu dưới dạng plaintext
        // Chuyển đổi timestamp thành định dạng ngày tháng năm dễ đọc
        const regTime = new Date(userData.registerTime);
        accountRegisterTime.textContent = regTime.toLocaleString(); // hoặc regTime.toLocaleDateString() cho chỉ ngày tháng năm
      }
    });
    accountInfoModal.classList.remove("acc-hidden");
    // Buộc trình duyệt render lại để hiệu ứng transition hoạt động
    void accountInfoModal.offsetWidth;
    accountInfoModal.classList.add("show");
  }

  accountInfoIcon.addEventListener("click", openAccountInfoModal);

  accountInfoClose.addEventListener("click", function () {
    accountInfoModal.classList.remove("show");
    setTimeout(function () {
      accountInfoModal.classList.add("acc-hidden");
    }, 300);
  });
});
// Thông Báo Wwb ⭐️
            // Lấy phần tử overlay và nút đóng
    const overlay = document.getElementById('notification-overlay');
    const closeBtn = overlay.querySelector('.close-btn');
    
    // Hàm ẩn overlay với hiệu ứng
    function hideOverlay() {
      overlay.classList.add('hide');
      // Sau khi hiệu ứng hoàn thành (0.5 giây), ẩn hoàn toàn overlay khỏi flow trang
      setTimeout(() => {
        overlay.style.display = 'none';
      }, 500);
    }
    
    // Khi nhấn nút tắt, ẩn overlay
    closeBtn.addEventListener('click', hideOverlay);

// số đư ⭐️⭐️
// Đảm bảo DOM đã load
document.addEventListener("DOMContentLoaded", function() {

  // 1. Hiển thị số dư của người dùng nếu đã đăng nhập
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      var uid = user.uid;
      var balanceRef = firebase.database().ref("users/" + uid + "/balance");
      balanceRef.on("value", function(snapshot) {
        var balance = snapshot.val() || 0;
        // Hiển thị số dư (ví dụ trong thẻ span có id "userBalance")
        document.getElementById("userBalance").innerText = "Số dư: " + balance.toLocaleString() + "₫";
      });
    } else {
      document.getElementById("userBalance").innerText = "Số dư: 0₫";
    }
  });

  // 2. Xử lý sự kiện khi nhấn nút "Mua Ngay"
  var purchaseButtons = document.querySelectorAll(".btn-play");
  purchaseButtons.forEach(function(button) {
    button.addEventListener("click", function() {
      // Lấy thông tin sản phẩm từ thuộc tính data
      var price = parseInt(button.getAttribute("data-price"));
      var product = button.getAttribute("data-product");
      var downloadLink = button.getAttribute("data-download");

      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          var uid = user.uid;
          var userRef = firebase.database().ref("users/" + uid);
          // Lấy số dư hiện tại của người dùng
          userRef.once("value").then(function(snapshot) {
            var userData = snapshot.val();
            var currentBalance = userData && userData.balance ? parseInt(userData.balance) : 0;
            if (currentBalance >= price) {
              // Nếu số dư đủ, trừ tiền và cập nhật lại số dư
              var newBalance = currentBalance - price;
              return userRef.update({ balance: newBalance })
                .then(function() {
                  // Lưu lịch sử mua hàng vào Firebase
                  var purchaseHistoryRef = firebase.database().ref("purchaseHistory/" + uid);
                  var newPurchase = {
                    product: product,
                    price: price,
                    downloadLink: downloadLink,
                    timestamp: Date.now(),
                    status: "Thành công"
                  };
                  return purchaseHistoryRef.push(newPurchase);
                })
                .then(function() {
                  showNotification("Mua hàng thành công!", "success");
                  // Tạo nút tải xuống
                  var downloadBtn = document.createElement("a");
                  downloadBtn.href = downloadLink;
                  downloadBtn.target = "_blank";
                  downloadBtn.innerHTML = '<i class="fas fa-download"></i> Tải Ngay';
                  downloadBtn.className = "download-btn";
                  // Thêm nút tải xuống sau nút "Mua Ngay"
                  button.parentElement.appendChild(downloadBtn);
                })
                .catch(function(error) {
                  console.error("Lỗi cập nhật số dư hoặc lưu lịch sử: ", error);
                  showNotification("Có lỗi xảy ra. Vui lòng thử lại!", "error");
                });
            } else {
              // Nếu số dư không đủ
              showNotification("Số dư không đủ để mua sản phẩm!", "error");
            }
          });
        } else {
          showNotification("Vui lòng đăng nhập để mua hàng!", "error");
        }
      });
    });
  });
});

// 3. Hàm hiển thị thông báo động
function showNotification(message, type) {
  var container = document.getElementById("notificationContainer");
  if (!container) {
    container = document.createElement("div");
    container.id = "notificationContainer";
    document.body.appendChild(container);
  }
  var notif = document.createElement("div");
  notif.className = "notification " + type; // Ví dụ: "notification success" hoặc "notification error"
  notif.innerText = message;
  container.appendChild(notif);
  // Tự động ẩn sau 3 giây
  setTimeout(function() {
    notif.remove();
  }, 3000);
}
</script>

  </body>
</html>
